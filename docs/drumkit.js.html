<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: drumkit.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: drumkit.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// @ts-check

/**
 * List of drum keys
 * @type {NodeList}
 */
const keys = document.querySelectorAll('.key');

/**
 * Listen to transitioned event
 *
 * @type {HTMLElement} - Drum key
 * @listens document#transitionend - Listen for end of element transition
 */
// @ts-ignore
keys.forEach((key) => key.addEventListener('transitionend', stopPlaying));

/**
 *
 * @param {TransitionEvent} e - Transition event occurring on a key
 * @returns {void}
 */
function stopPlaying(e) {
  if (e.propertyName !== 'transform') return;
  this.classList.remove('playing');
}

/**
 *
 * @param {KeyboardEvent} e - Keyboard event occurring on keydown
 * @returns {void}
 */
function playSound(e) {
  /**
   * Audio
   * @type {HTMLAudioElement}
   */
  const audio = document.querySelector(`audio[data-key="${e.keyCode}"`);
  /**
   * Key
   * @type {HTMLElement}
   */
  const key = document.querySelector(`.key[data-key="${e.keyCode}"`);
  if (!audio) return;

  audio.currentTime = 0;
  audio.play();

  key.classList.add('playing');
  console.log('playing');
}

/**
 *
 * @param {TouchEvent} e
 * @returns {void}
 */
function touchPlay(e) {
  /**
   * Event target
   * @type {HTMLDivElement}
   */
  // @ts-ignore
  const target = e.target;
  let touchID = target.attributes['data-key'].value;
  /**
   * Audio
   * @type {HTMLAudioElement}
   */
  const audio = document.querySelector(`audio[data-key="${touchID}"`);
  /**
   * Key
   * @type {HTMLElement}
   */
  const key = document.querySelector(`.key[data-key="${touchID}"`);

  if (!audio) return;

  audio.currentTime = 0;
  audio.play();

  key.classList.add('playing');
}

window.addEventListener('keydown', playSound);
window.addEventListener('touchstart', touchPlay);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#keys">keys</a></li><li><a href="global.html#playSound">playSound</a></li><li><a href="global.html#stopPlaying">stopPlaying</a></li><li><a href="global.html#touchPlay">touchPlay</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sat Mar 12 2022 12:24:01 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
